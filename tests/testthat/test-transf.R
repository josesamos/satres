test_that("clip_bands()", {
  expect_equal({
    file <- system.file("extdata", "lanjaron.gpkg", package = "satres")
    lanjaron <- sf::st_read(file, layer = "lanjaron_bbox", quiet = TRUE)

    esa <- system.file("extdata", "esa", package = "satres")
    sr <- satres(dir = esa) |>
      clip_bands(polygon = lanjaron)

    c(sat_dimensions(sr),
      sat_names(sr),
      sat_minmax(sr))
  },
  c(
    "r1000m",
    "12",
    "19",
    "4",
    "r2000m",
    "6",
    "9",
    "10",
    "r6000m",
    "2",
    "3",
    "11",
    "r1000m",
    "B02",
    "B03",
    "B04",
    "B08",
    "r2000m",
    "B01",
    "B02",
    "B03",
    "B04",
    "B05",
    "B06",
    "B07",
    "B11",
    "B12",
    "B8A",
    "r6000m",
    "B01",
    "B02",
    "B03",
    "B04",
    "B05",
    "B06",
    "B07",
    "B09",
    "B11",
    "B12",
    "B8A",
    "r1000m",
    "1377.03",
    "2294.93",
    "1564.25",
    "2620.98",
    "1557.08",
    "2817.55",
    "2398.98",
    "3953.01",
    "r2000m",
    "1361.18",
    "2020.58",
    "1451.86",
    "2131.65",
    "1670.77",
    "2425.96",
    "1724.69",
    "2579.39",
    "2070.33",
    "2894.36",
    "2540.32",
    "3458.07",
    "2575.47",
    "3675.26",
    "2527.24",
    "3607.11",
    "2032.95",
    "3015.94",
    "2568.8",
    "3890.4",
    "r6000m",
    "1458.41",
    "1746.39",
    "1582.67",
    "1854.04",
    "1838.68",
    "2167.22",
    "1959.1",
    "2332",
    "2293.19",
    "2697.37",
    "2793.66",
    "3224.43",
    "2948.2",
    "3400.28",
    "3085.09",
    "3739.77",
    "2783.35",
    "3382.88",
    "2265.91",
    "2813.72",
    "3036.8",
    "3581.33"
  ))
})
